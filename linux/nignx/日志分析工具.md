# goaccess(推荐)

## 资料

| 名称           | 地址                            |
| -------------- | ------------------------------- |
| goaccess中文网 | [link](https://www.goaccess.cc) |



## 安装

```shell
# centos
sudo yum install goaccess
# ubuntu
sudo apt update && sudo apt install goaccess
# macos
brew install goaccess
```

**编译安装**

```shell
# 下载最新版本（请从官网确认最新版本号）
wget https://tar.goaccess.io/goaccess-1.8.1.tar.gz
tar -xzvf goaccess-1.8.1.tar.gz
cd goaccess-1.8.1

# 编译安装（启用必要功能）
./configure --enable-geoip=mmdb --enable-tcb=btree --with-openssl
make
sudo make install
```



## 基本使用

```shell
goaccess www3.puxiansheng.com_2025-08-08.log \
--log-format='%v %h %^[%d:%t %^] "%r" %s %b "%R" "%u" "%^" %^ %T %^' \
--date-format=%d/%b/%Y \
--time-format=%H:%M:%S \
-a > report.html
```

**实时推送sh启动脚本**

> 如果用后台运行方式启动（加 `&` 或 `nohup`）：

```shell
#!/bin/bash

# 获取当前日期，格式为 YYYY-MM-DD

CURRENT_DATE=$(date +%Y-%m-%d)

# 铺先生日志目录（注意等号两边不能有空格）
PU_NGINX_LOG_DIR="/www/wwwroot/mrpu3/access_log/www3.puxiansheng.com_${CURRENT_DATE}.log"

# 输出html文件位置
OUT_PUT_HTML_DIR="/www/wwwroot/mrpu3/public/report.html"

# 检查日志文件是否存在
if [ ! -f "$PU_NGINX_LOG_DIR" ]; then
    echo "错误：日志文件 $PU_NGINX_LOG_DIR 不存在！"
    exit 1
fi

# 使用变量替换固定日期（变量需要加$符号）
goaccess "$PU_NGINX_LOG_DIR"  \
-o "$OUT_PUT_HTML_DIR" \
--real-time-html \
--ws-url=wss://47.107.82.236:7890 \
--time-format='%H:%M:%S' \
--date-format='%d/%b/%Y' \
--log-format='%v %h %^[%d:%t %^] "%r" %s %b "%R" "%u" "%^" %^ %T %^' 
```



# 效果展示

https://yaoliuyang.neocities.org/report