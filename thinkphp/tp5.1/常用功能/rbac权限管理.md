## 说明

> RBAC（Role-Based Access Control）是一种基于角色的访问控制机制，它通过将权限授予给角色，然后将角色授予给用户，从而实现了用户对资源的权限控制。
>
> 1. **核心概念**
> 用户 (User): 系统中的操作者。
> 角色 (Role): 一组权限的集合，代表了某种职责或功能。
> 权限 (Permission): 对特定资源执行特定操作的能力。
> 资源 (Resource): 系统中可被访问的对象。
> 2. **关系定义**
> 用户-角色关系: 一个用户可以拥有多个角色。
> 角色-权限关系: 一个角色可以包含多个权限。
> 权限-资源关系: 一个权限可以对应多个资源上的操作



> 在使用 TP5 实现 RBAC 权限管理时，可以按照以下步骤进行:
>
> 1. 创建数据表
>    创建用户表（user）和角色表（role），以及用户角色关联表（user_role）和角色权限关联表（role_access）。
> 2. 定义模型
>    在 TP5 中，可以使用模型来管理数据库。根据上述数据表，定义用户模型（User）、角色模型（Role）以及它们之间的关联模型（UserRole 和 RoleAccess）。
> 3. 编写控制器
>    在 TP5 中，控制器用于接收和处理请求，并控制页面的显示。编写一个权限控制器（Access），用于对用户进行权限认证。
> 4. 使用中间件
>    中间件是 TP5 中非常重要的概念，它可以在请求到达控制器之前或之后执行代码逻辑。使用中间件进行权限验证，可以在控制器之前对请求进行处理。
> 5. 创建页面
>    最后，根据需要创建相应的页面和功能，并根据用户角色和权限进行访问控制。
>
> 以上是使用 TP5 实现 RBAC 权限管理的基本步骤，具体实现的代码可以根据自己的需求和情况进行编写。

### 数据表设计

1. 用户表（user）

- id：用户 ID
- username：用户名
- password：密码
- email：电子邮件
- last_login_time：最后登录时间
- last_login_ip：最后登录 IP

1. 角色表（role）

- id：角色 ID
- name：角色名称
- description：角色描述

1. 用户角色关联表（user_role）

- id：关联 ID
- user_id：用户 ID
- role_id：角色 ID

1. 权限表（access）

- id：权限 ID
- name：权限名称
- description：权限描述

1. 角色权限关联表（role_access）

- id：关联 ID
- role_id：角色 ID
- access_id：权限 ID

### 代码逻辑

1. 创建模型

- UserModel：对应用户表的模型
- RoleModel：对应角色表的模型
- UserRoleModel：对应用户角色关联表的模型
- AccessModel：对应权限表的模型
- RoleAccessModel：对应角色权限关联表的模型

1. 编写控制器

- AccessController：用于根据用户角色和权限进行访问控制。
  - index：展示页面或跳转到其他控制器
  - checkLogin：检查用户是否登录
  - checkAccess：检查用户是否有访问权限

1. 定义中间件

- AuthMiddleware：用于检查用户是否登录。

1. 创建页面

- 根据用户角色和权限进行访问控制，展示或隐藏相应的页面和功能。

以上是一个简单的 RBAC 权限管理系统的 TP5 代码逻辑和数据表设计，具体实现的代码可以根据自己的需求和情况进行编写。