## 购物车流程

> 1. 创建订单：用户在商城选择商品，并添加到购物车中。在查看购物车页面或结算页面，用户可以选择结账。当用户确定购物车中的商品时，点击结账按钮，系统根据用户的收货地址、支付方式及其他条件创建一个订单。
> 2. 支付订单：用户选择支付方式，包括信用卡、Paypal 等，输入相应的支付信息确认支付。
> 3. 发货：收到用户的支付信息后，商家准备并打包好商品，等待配送。
> 4. 配送：商家将商品发送到用户的收货地址。
> 5. 确认收货：当用户收到商品后，确认所有商品都已经收到并符合要求。
> 6. 完成订单：整个购物流程结束，订单状态更新为已完成。
>
> 以上是购物车的基本流程，此外，在 Laravel 中实现购物车还有以下步骤：
>
> 1. 将商品加入购物车
> 2. 显示购物车内容
> 3. 修改购物车商品数量
> 4. 删除购物车商品
>
> 实现以上步骤可以使用 Laravel 提供的 Session 储存购物车信息，也可以使用数据库存储购物车信息。购物车实现方法有很多，可以根据实际需要进行选择。

> 下面是 Laravel 实现购物车的数据库表和基本业务逻辑：
>
> ## 数据库表设计
>
> ### users 表
> - id: 用户 ID
> - name: 用户名
> - email: 邮箱
> - password: 密码
> - remember_token: 记住我 token
>
> ### products 表
> - id: 商品 ID
> - name: 商品名称
> - price: 商品价格
> - sku: 商品库存量
>
> ### carts 表
> - id: 购物车 ID
> - user_id: 用户 ID
> - product_id: 商品 ID
> - quantity: 商品数量
>
> ### orders 表
> - id: 订单 ID
> - user_id: 用户 ID
> - status: 订单状态（待支付，已支付，已发货，已完成等）
> - created_at: 创建时间
>
> ### order_items 表
> - id: 订单商品详情 ID
> - order_id: 订单 ID
> - product_id: 商品 ID
> - quantity: 商品数量
> - price: 商品单价
> - subtotal: 商品小计
>
> ## 基本业务逻辑
>
> ### 添加商品到购物车
> 1. 根据用户输入的商品 ID 和数量查找对应的商品（可选）
> 2. 创建购物车记录，记录用户 ID、商品 ID 和数量
> 3. 如果购物车已存在相同的商品记录，更新其数量，否则创建新记录
>
> ### 显示购物车
> 1. 查找当前用户所在的购物车记录（可选）
> 2. 根据购物车记录查找对应商品的名称、价格和数量等信息
> 3. 显示购物车列表页面
>
> ### 修改购物车商品数量
> 1. 根据购物车记录 ID 和修改数量更新购物车记录
> 2. 如果修改后数量为 0，删除该购物车记录
>
> ### 删除购物车商品
> 1. 根据购物车记录 ID 删除购物车记录
>
> ### 提交订单
> 1. 创建订单记录，记录用户 ID、订单号、订单金额和创建时间等信息
> 2. 创建订单明细记录，记录订单 ID、商品 ID、商品数量和单价等信息
> 3. 根据订单金额和用户选择的支付方式（例如信用卡、Paypal 等）进行支付
> 4. 如果支付成功，更新订单状态为“已支付”并减少相应商品的库存量
> 5. 如果支付失败，删除订单记录及相关明细记录
>
> ### 确认收货
> 1. 用户确认收到了商品
> 2. 更新订单状态为“已完成”