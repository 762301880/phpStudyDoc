# 资料

| 名称                     | 地址                                                         |
| ------------------------ | ------------------------------------------------------------ |
| 微信支付官网(商户订单号) | [link](https://pay.weixin.qq.com/wiki/doc/api/native.php?chapter=4_2)  [link](https://developer.aliyun.com/article/868776) |
|                          |                                                              |



### 商户订单号 生成规则

> 商户支付的订单号由商户自定义生成，仅支持使用字母、数字、中划线-、下划线_、竖线|、星号*这些英文半角字符的组合，请勿使用汉字或全角等特殊字符。微信支付要求商户订单号保持唯一性（建议根据当前系统时间加随机序列来生成订单号）。重新发起一笔支付要使用原订单号，避免重复支付；已支付过或已调用关单、撤销（请见后文的API列表）的订单号不能重新发起支付。
>
> 我们主要记住生成的订单编号必须是唯一不重复的编号其他的可以根据喜好生成

**代码生成示例**

> 自定义订单编号生成规则**日期+用户id+随机数字4位**
>
> UUID（通用唯一识别码）是一种用于在计算机系统中唯一标识实体（如文件、对象、资源等）的标准化方式。UUID的设计目的是保证在分布式系统中生成的标识符是唯一的，即使是在不同的系统中。
>
> 以下是UUID的一些详细解释：
>
> 1. **格式**：
>    - UUID通常以32个十六进制数字的形式表示，共有5个“部分”组成，用连字符分隔。例如：`550e8400-e29b-41d4-a716-446655440000`。
>
> 2. **版本**：
>    - UUID有不同的版本，每个版本有不同的生成规则和格式。最常见的版本是基于时间戳的版本1和基于随机数的版本4。
>
> 3. **版本1**（基于时间戳）：
>    - 这种UUID基于当前时间和计算机的MAC地址生成。因此，同一台计算机上生成的UUID在正常情况下是唯一的。
>
> 4. **版本4**（基于随机数）：
>    - 这种UUID完全基于随机数生成。因此，即使在不同的系统中生成，也极其不可能出现冲突。
>
> 5. **唯一性**：
>    - UUID的唯一性取决于生成它们的算法和数据源。对于版本1，如果在同一时钟周期内生成多个UUID，可能会出现冲突。对于版本4，理论上是无法出现冲突的。
>
> 6. **生成算法**：
>    - 不同版本的UUID使用不同的生成算法。例如，版本1使用了时间戳和MAC地址，而版本4完全基于随机数。
>
> 7. **用途**：
>    - UUID在许多计算机领域都有广泛的用途，例如在分布式系统中确保唯一标识、数据库中的主键、Web开发中的会话标识等。
>
> 8. **性能考虑**：
>    - 生成版本1的UUID可能涉及到与系统时钟和MAC地址相关的操作，这可能会带来一些性能开销。相比之下，生成版本4的UUID通常更快速简单。
>
> 9. **安全性**：
>    - 版本1的UUID可能会因为暴露MAC地址而带来一些安全风险，特别是在某些敏感环境下。版本4基于完全随机数，通常被认为是更安全的。
>
> 10. **实现**：
>     - 大多数编程语言和平台都提供了生成UUID的库或函数，以便开发者能够轻松地在他们的应用程序中使用UUID。
>
> 总的来说，UUID是一个非常有用的工具，特别是在需要保证在分布式环境中生成的标识符是唯一的情况下。不同版本的UUID适用于不同的应用场景，开发者可以根据具体需求选择合适的版本。

```php
# 建议做成全局调用的函数
/**
 * $userId 如果用户有uuid 则建议q
 */
public function getOrderNo(){
        $date = date('YmdHis'); # 日期
        $userId=\Auth::user()->id; #用户id
        $randomFourNum=random_int(1000,9999); # 随机四位字符
        $orderNo = $date.$userId.$randomFourNum; 
        return $orderNo;
 }
```

